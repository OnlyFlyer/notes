## mock interview


flex: 1

默认值
flex: 0 1 auto;

flex: auto = 1 1 auto;
flex: none = 0 0 auto;

flex: 1 = 1 1 0;
flex: 1 1 = 1 1 0;

一个值的情况分两种：
1. 不带单位相当于是放大数值
2. 带单位则表明是 第三个参数，最小宽度

两个值：
  1. 第一个是放大数值
  2. 第二个是缩小数值


### Zenlayer

行业	规模
云服务	500 - 1000

1. 比较有挑战的项目或者事情

molecule（语法、词法）、不见面音视频
数据流方案，如何设计数据流方案？会用到什么设计模式？mobx 和 rematch、redux-toolkit 区别，实现的原理

发布订阅
数据劫持

2. 页面性能的优化方法

状态隔离（props，有 state 吗？）、性能优化 API

3. React diff 比对的顺序 - 深度优先遍历

4. HTTP 缓存

HTTP1.1

   - 高延迟（队头堵塞 Head of Line Blocking）：当顺序发送的请求序列中的一个请求被阻塞时，在后面排队的也会被阻塞，会导致客户端等待时间延长
     - 将页面的资源分散到不同的域名下面，提升连接上限，Chrome 有一个机制，对于同一个域名，默认允许同时建立6个 TCP 持久连接，虽然能够共用一个 TCP 管道，但是同一个管道同一时刻只能处理一个请求
     - 合并小文件，减少资源数
   - 无状态，带来巨大的 HTTP 头部
   - 明文传输，不安全
   - 单向连接，无法做服务器推送

HTTP2

  - 二进制传输（将请求和响应数据分割成更小的帧，采用二进制编码），同域名下所有通信都在一个连接上完成，可以承载任意数量的双向数据流，每个数据流以消息的方式发送，消息由一个或多个帧组成，多个帧之间可乱序发送，根据帧首部的流标识来拼装
  - Header 压缩 HPack
  - 多路复用，解决浏览器限制同一域名下的请求数量，因为新开一个 TCP 连接都需要慢慢提升传输速度
  - 服务器推送

强缓存、协商缓存 各有的字段

1. 如果要部署一个环境，部署 ngix，用哪种 HTTP 缓存好一点

对于不太变化的静态资源 比如 js、css、图片等等，可以进行强缓存优化方式
对于常变化的 index.html 入口，可以使用 协商缓存 来进行优化，到需要更新的时候调整 请求的查询字符串即可

1. Vite 有了解过吗？前几年比较火的

简单了解一下

7. esmodule 规范，与 commonjs 的区别

esmodule 有什么好处？

便于静态分析，为什么 commonjs 不能做静态分析

esm 现在也可以支持不放在顶部了， daynamic import 动态加载，这个怎么说？

除了模块这些，还有没有其他的好处、优点

esm 可以通过 import url 引入， commonjs 不行，但会带来一个问题，请问是什么问题？

csp（Content Security Policy） 了解过吗？

8. 简单请求和非简单请求的区别，具体一点，非简单请求时，options 请求，服务端需要返回什么才是正常的，什么不是正常的

9. 你觉得你最熟悉的是哪一块？

webpack 的性能问题解决
10. 离线首屏加载优化怎么做的？
11. WebRTC 好用吗？IM？
12. React hooks 是如何实现的？hooks 原理是什么？useMemo 如何实现的？useCallback 如何实现？


useMemo -> 作用是 为了减轻很重的计算量   函数式编程，闭包实现的，缓存一个变量，每次执行看看这个结果和变量是否一致，如果不变直接返回。

13. React 最深了解到什么程度？

14. CSS 的回流（重排）和重绘有了解过吗？

### 大华

1. 离线首屏如何加载？

没有网也能浏览网页

PWA（Progressive Web Apps），核心是用户体验

  - Web APP Manifest，主要的体现就是一个 manifest.json 文件

Service Worker

  - 介于 浏览器和 服务端之间的一个代理服务器
  - 可拦截网络请求、可操作本地缓存(CacheStorage、IndexDB 等)，可接受服务器推送的离线消息
  - HTTPS 下才可执行

骨架屏
  尽量用内连而不是通过 link 标签去做， 其他外链的 link 标签需要设置一下，  ref='stylesheet' -> ref='preload'，因为涉及到 浏览器的渲染流程

响应式布局

  设备像素（手机像素）
  CSS 像素
  称为设备像素比 dpr（Device Pixel Ratio）

  em：相对单位，相对于元素自身的 font-size
  rem（Root em） html，html 默认的字体大小是 16px， postcss-px2rem

Web Push

1. 单元测试有用过吗？



--


### 字节跳动

行业	规模
直播	1000+

1. 首屏加载优化，做了哪些优化？如何检测优化结果？

检测优化结果：

lighthouse 结论
FCP（First Contentful Paint）：浏览器首次绘制页面的时间点
LCP（Largest Contentful Paint）：最大内容绘制，显示最大元素所需时间
CLS（累计布局位移，用于衡量页面上元素在渲染过程中发生不期望的移动的情况）：
FID（首次输入延迟，衡量用户首次和浏览器发生交互到浏览器实际响应用户的延迟时间）：

   - 针对后台接口请求阶段的性能瓶颈：
     - 与后台沟通，减少或者合并请求的数量
     - 考虑 BFF 方案，减少请求的数量
     - 数据预加载
   - 针对 js 资源的瓶颈
     - 对非首屏 js 进行懒加载
     - 由于 js 请求采用了 HTTP/2，可以使用 splitChunk 拆分 js，利用 HTTP/2 多路复用的优势


chunkjs、HTTP 请求

1. 页面卡顿问题解决

2. 汉化方案，写了一个插件

3. 统一产品图标规范

4. 不见面监管大厅

5. 音视频和消息通讯，会有延迟，怎么做到同步?

SEI，在音视频流每一帧可以带一些额外的信息，比如时间戳，心跳检测 等等，可以通过这些信息进行计算、比对

7. 谈一下 IM？

轮训查找，有缺点，就是 QPS 会很高，有压力

可以切换为 WebSocket，但是需要做兼容处理，一些老的浏览器或者老的版本还是要用 轮询

8. **编程题** 实现一个 观察者模式（发布订阅）

观察者模式和发布订阅不同

on 和 once 可以结合

1. PC 端 单页应用，微前端有了解过吗？沙箱隔离是 js，有知道 css 隔离吗？

应用通信， postMessage， 子应用之间、父子应用之间通信

如果考虑做微前端架构，就不会考虑 iframe

如果通信通过上面的发布订阅去做就可以。

   1. css module
   2. css-in-js
   3. Shadow DOM
   4. vue scope

1.  问题

    - 业务情况
    - 抖音音视频大致的链路
      - 信息连接通过 轮询，后面换成了 Websocket（浏览器兼容）
    - Buffer 的问题，建立连接，大头在直播播放器端，如果推流端游卡顿，那么拉流会有卡顿，体验不好，所以接受端会 delay 2s 或者是 n s，有两秒的缓冲

- 回答有时候会失焦，抓不到重点
- 做过 Web RTC 相关项目，但是并未深入了解底层原理（基于三方库做封装）


如何禁止 js 访问 cookie：

使用 set-cookie 来设置 cookie，httpOnly 选项，这个选项禁止任何 js 访问 cookie
