
## call/apply (this 指向)

```js

foo = {
  value: 1,
};

function bar(name, age) {
  console.log(name, age, this.value);
}

Function.prototype.myCall = function(ctx) {
  const _ctx = ctx || window;
  const tempFn = Symbol();
  _ctx[tempFn] = this;
  const args = [...arguments].slice(1);
  const result = _ctx.[tempFn](...args);
  delete _ctx[tempFn];
  return result;
}

bar.myCall(foo, 'zhangsan', 20);
//  apply 和 call 类似，只是参数传递形式不一致而已

```

## 实现 bind

```js

Function.prototype.myBind1 = function(ctx) {
  const self = this;
  const args1 = [...arguments].slice(1);
  const fnBound = function(...args) {
    console.log(this, '--this');
    console.log(fnBound, '--fnBound');
    console.log(this instanceof fnBound, '--39');
    return self.call(ctx, ...args1, ...args);
  }
  return fnBound;
}

Function.prototype.myBind = function(ctx) {
  const _ctx = ctx || window;
  const tempFn = Symbol();
  const args1 = [...arguments].slice(1);
  _ctx[tempFn] = this;
  return function(...args) {
    const result = _ctx[tempFn](...args1, ...args);
    delete _ctx[tempFn];
    return result;
  };
}

```


```js

foo = {
  value: 1,
};

function bar(name, age) {
  console.log(this, '--64');
  console.log(name, age, this.value, '--65');
}

const bindFoo = bar.bind(foo, 'x');

bindFoo(18);

```

## 实现 new


```js
// 1
function objectFactory(Constructor, ...args) {
  const obj = new Object();
  obj.__proto__ = Constructor.prototype;
  Constructor.call(obj, ...args);
  return obj;
};

// 2
function objectFactory1(Constructor, ...args) {
  const obj = {};
  obj.__proto__ = Constructor.prototype;
  const temp = Constructor.call(obj, ...args);
  return typeof temp === ' object' ? temp : obj;
}


```

## jsx -> js   fiber 实现

## promise
